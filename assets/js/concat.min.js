var K=function(){var b=navigator.userAgent;return{ie:b.match(/MSIE\s([^;]*)/)}}();var Tweetlight={init:function(a){this.url="./tweets.php?username="+a.username+"&count="+a.count+"&api=statuses_userTimeline";this.container=a.container;this.fetch()},xhr:function(){var a=new XMLHttpRequest();return a},getJSON:function(a,c){var b=this.xhr();a.url=a.url||location.href;a.data=a.data||null;c=c||function(){};b.open("GET",a.url,true);b.send(a.data);b.onreadystatechange=function(){if(b.status==200&&b.readyState==4){c(b.responseText)}}},fetch:function(){var a=this;a.getJSON({url:this.url},function(e){var f=JSON.parse(e);var d=document.querySelector(a.container),c="";for(var b in f){c+='<li><span class="tweet">'+a.twitterLinks(f[b].text)+'</span> <span class="created">'+a.prettyDate(f[b].created)+"</span></li>"}d.innerHTML=c})},prettyDate:function(n){var m=new Date();var k=new Date(n);if(K.ie){k=Date.parse(n.replace(/( \+)/," UTC$1"))}var j=m-k;var i=1000,g=i*60,h=g*60,l=h*24,f=l*7;if(isNaN(j)||j<0){return""}if(j<i*7){return"just now"}if(j<g){return Math.floor(j/i)+" seconds ago"}if(j<g*2){return"1 minute ago"}if(j<h){return Math.floor(j/g)+" minutes ago"}if(j<h*2){return"1 hour ago"}if(j<l){return Math.floor(j/h)+" hours ago"}if(j>l&&j<l*2){return"yesterday"}if(j<l*365){return Math.floor(j/l)+" days ago"}else{return"over a year ago"}},twitterLinks:function(a){a=a.replace(/(https?:\/\/)([\w\-:;?&=+.%#\/]+)/gi,'<a href="$1$2">$2</a>').replace(/(^|\W)@(\w+)/g,'$1<a href="https://twitter.com/$2">@$2</a>').replace(/(^|\W)#(\w+)/g,'$1<a href="https://search.twitter.com/search?q=%23$2">#$2</a>');return a}};